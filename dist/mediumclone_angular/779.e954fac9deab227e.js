"use strict";(self.webpackChunkmediumclone_angular=self.webpackChunkmediumclone_angular||[]).push([[779],{1779:(D,g,n)=>{n.r(g),n.d(g,{editArticle:()=>j});var u={};n.r(u),n.d(u,{editArticleEffect:()=>R,getEditArticleEffect:()=>Z,redirectAfterEditArticle:()=>W});var o=n(7483),l=n(4221),A=n(6814),y=n(6418),L=n(2572),f=n(7398),x=n(9185),e=n(5879);const a=(0,l.R7)({source:"Edit Article",events:{"Get Article":(0,l.Ky)(),"Get Article Success":(0,l.Ky)(),"Get Article Failure":(0,l.Ky)(),"Edit Article":(0,l.Ky)(),"Edit Article Success":(0,l.Ky)(),"Edit Article Failure":(0,l.Ky)()}});var $=n(493);const h={article:null,isLoading:!1,isSubmitting:!1,errors:null},C=(0,l.Tz)({name:"editArticle",reducer:(0,l.Lq)(h,(0,l.on)(a.getArticle,t=>({...t,isLoading:!0})),(0,l.on)(a.getArticleSuccess,(t,{article:r})=>({...t,article:r,isLoading:!1})),(0,l.on)(a.editArticle,t=>({...t,isLoading:!0,isSubmitting:!0})),(0,l.on)(a.editArticleSuccess,(t,{article:r})=>({...t,isLoading:!1,isSubmitting:!1,article:r})),(0,l.on)(a.editArticleFailure,(t,{errors:r})=>({...t,isLoading:!1,isSubmitting:!1,errors:r})),(0,l.on)($.hn,()=>h))}),{name:G,reducer:I,selectArticle:K,selectIsLoading:M,selectErrors:Y,selectIsSubmitting:N}=C;let p=(()=>{var t;class r{constructor(i){this.store=i,this.isLoading$=this.store.select(M),this.loadArticle$=this.store.select(K),this.backendError$=this.store.select(Y),this.isSubmitting$=this.store.select(N)}loadArticle(i){this.store.dispatch(a.getArticle({slug:i}))}editArticle(i,s){this.store.dispatch(a.editArticle({slug:i,request:s}))}}return(t=r).\u0275fac=function(i){return new(i||t)(e.LFG(l.yh))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),r})();var E=n(8281);function T(t,r){1&t&&e._UZ(0,"mc-loader")}function b(t,r){if(1&t){const c=e.EpF();e.ynx(0),e.TgZ(1,"mc-article-form",1),e.NdJ("articleSubmit",function(s){e.CHM(c);const d=e.oxw(2);return e.KtG(d.onEditArticleSubmit(s))}),e.qZA(),e.BQk()}if(2&t){const c=e.oxw().ngIf;e.xp6(1),e.Q6J("initFormValues",c.loadArticle)("isSubmitting",c.isSubmitting)("backendErrors",c.backendError)}}function z(t,r){if(1&t&&(e.ynx(0),e.YNc(1,T,1,0,"mc-loader",0),e.YNc(2,b,2,3,"ng-container",0),e.BQk()),2&t){const c=r.ngIf;e.xp6(1),e.Q6J("ngIf",c.isLoading),e.xp6(1),e.Q6J("ngIf",c.loadArticle)}}let Q=(()=>{var t;class r{constructor(i,s){this.editArticleFacade=i,this.route=s,this.data$=(0,L.a)([this.editArticleFacade.isLoading$,this.editArticleFacade.loadArticle$,this.editArticleFacade.backendError$,this.editArticleFacade.isSubmitting$]).pipe((0,f.U)(([d,B,F,V])=>({isLoading:d,loadArticle:B,backendError:F?[F]:null,isSubmitting:V}))),this.slug=this.route.snapshot.paramMap.get("slug")??""}ngOnInit(){this.editArticleFacade.loadArticle(this.slug)}onEditArticleSubmit(i){this.editArticleFacade.editArticle(this.slug,{article:i})}}return(t=r).\u0275fac=function(i){return new(i||t)(e.Y36(p),e.Y36(E.gz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["mc-edit-article"]],standalone:!0,features:[e.jDz],decls:2,vars:3,consts:[[4,"ngIf"],[3,"initFormValues","isSubmitting","backendErrors","articleSubmit"]],template:function(i,s){1&i&&(e.YNc(0,z,3,2,"ng-container",0),e.ALo(1,"async")),2&i&&e.Q6J("ngIf",e.lcZ(1,1,s.data$))},dependencies:[A.ez,A.O5,A.Ov,y.E,x.R]}),r})();var v=n(5516),U=n(9862);let m=(()=>{var t;class r{constructor(i){this.http=i}getArticle(i){return this.http.get(v.N.apiUrl+`/articles/${i}`)}editArticle(i,s){return this.http.put(v.N.apiUrl+`/articles/${i}`,s)}}return(t=r).\u0275fac=function(i){return new(i||t)(e.LFG(U.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),r})();var S=n(4664),J=n(6306),O=n(2096),X=n(9397);const Z=(0,o.GW)((t=(0,e.f3M)(o.eX),r=(0,e.f3M)(m))=>t.pipe((0,o.l4)(a.getArticle),(0,S.w)(({slug:c})=>r.getArticle(c).pipe((0,f.U)(({article:i})=>a.getArticleSuccess({article:i})),(0,J.K)(i=>(0,O.of)(a.getArticleFailure({errors:i.error})))))),{functional:!0}),R=(0,o.GW)((t=(0,e.f3M)(o.eX),r=(0,e.f3M)(m))=>t.pipe((0,o.l4)(a.editArticle),(0,S.w)(({slug:c,request:i})=>r.editArticle(c,i).pipe((0,f.U)(({article:s})=>a.editArticleSuccess({article:s}))))),{functional:!0}),W=(0,o.GW)((t=(0,e.f3M)(o.eX),r=(0,e.f3M)(E.F0))=>t.pipe((0,o.l4)(a.editArticleSuccess),(0,X.b)(({article:c})=>{r.navigate(["/article",c.slug])})),{functional:!0,dispatch:!1}),j=[{path:"",component:Q,providers:[p,m,(0,l.oY)(G,I),(0,o.y3)(u)]}]}}]);