"use strict";(self.webpackChunkmediumclone_angular=self.webpackChunkmediumclone_angular||[]).push([[346],{1346:(W,f,c)=>{c.r(f),c.d(f,{createArticle:()=>I});var m={};c.r(m),c.d(m,{createArticleEffect:()=>T,redirectAfterArticleWasCreated:()=>Y});var o=c(7483),n=c(4221),A=c(6814),C=c(6418);const l=(0,n.R7)({source:"Create Article",events:{"Create Article":(0,n.Ky)(),"Create Article Success":(0,n.Ky)(),"Create Article Failure":(0,n.Ky)()}}),g=(0,n.Tz)({name:"createArticle",reducer:(0,n.Lq)({isSubmitting:!1,errors:null},(0,n.on)(l.createArticle,t=>({...t,isSubmitting:!0})),(0,n.on)(l.createArticleSuccess,t=>({...t,isSubmitting:!1})),(0,n.on)(l.createArticleFailure,(t,{errors:a})=>({...t,isSubmitting:!1,errors:a})))}),{name:S,reducer:F,selectErrors:y,selectIsSubmitting:b}=g;var e=c(5879);let d=(()=>{var t;class a{constructor(r){this.store=r,this.isSubmitting$=this.store.select(b),this.isError$=this.store.select(y)}createArticle(r){this.store.dispatch(l.createArticle({request:r}))}}return(t=a).\u0275fac=function(r){return new(r||t)(e.LFG(n.yh))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),a})();var E=c(2572),v=c(7398);function x(t,a){if(1&t){const i=e.EpF();e.ynx(0),e.TgZ(1,"mc-article-form",1),e.NdJ("articleSubmit",function(s){e.CHM(i);const u=e.oxw();return e.KtG(u.onCreateArticleSubmit(s))}),e.qZA(),e.BQk()}if(2&t){const i=a.ngIf,r=e.oxw();e.xp6(1),e.Q6J("initFormValues",r.initFormValues)("isSubmitting",i.isSubmitting)("backendErrors",i.backendErrors)}}let K=(()=>{var t;class a{constructor(r){this.createArticleFacade=r,this.initFormValues={body:"",description:"",tagList:[],title:""},this.data$=(0,E.a)(this.createArticleFacade.isSubmitting$,this.createArticleFacade.isError$).pipe((0,v.U)(([s,u])=>({isSubmitting:s,backendErrors:Object.keys(u??[]).map((J,V)=>u?Object.keys(u??[])[V]+" "+u[Object.keys(u??[])[0]]:"")})))}onCreateArticleSubmit(r){this.createArticleFacade.createArticle({article:r})}}return(t=a).\u0275fac=function(r){return new(r||t)(e.Y36(d))},t.\u0275cmp=e.Xpm({type:t,selectors:[["mc-create-article"]],standalone:!0,features:[e._Bn([d]),e.jDz],decls:2,vars:3,consts:[[4,"ngIf"],[3,"initFormValues","isSubmitting","backendErrors","articleSubmit"]],template:function(r,s){1&r&&(e.YNc(0,x,2,3,"ng-container",0),e.ALo(1,"async")),2&r&&e.Q6J("ngIf",e.lcZ(1,1,s.data$))},dependencies:[A.ez,A.O5,A.Ov,C.E]}),a})();var L=c(8281),M=c(4664),O=c(6306),$=c(2096),j=c(9397),z=c(5516),G=c(9862);let p=(()=>{var t;class a{constructor(r){this.http=r}createArticle(r){return this.http.post(z.N.apiUrl+"/articles",r)}}return(t=a).\u0275fac=function(r){return new(r||t)(e.LFG(G.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),a})();const T=(0,o.GW)((t=(0,e.f3M)(o.eX),a=(0,e.f3M)(p))=>t.pipe((0,o.l4)(l.createArticle),(0,M.w)(({request:i})=>a.createArticle(i).pipe((0,v.U)(({article:r})=>l.createArticleSuccess({article:r})),(0,O.K)(r=>(0,$.of)(l.createArticleFailure({errors:r.error.errors})))))),{functional:!0}),Y=(0,o.GW)((t=(0,e.f3M)(o.eX),a=(0,e.f3M)(L.F0))=>t.pipe((0,o.l4)(l.createArticleSuccess),(0,j.b)(({article:i})=>{a.navigate(["/article",i.slug])})),{functional:!0,dispatch:!1}),I=[{path:"",component:K,providers:[(0,n.oY)(S,F),(0,o.y3)(m),p]}]}}]);